<!doctype html>
<html>
	<head>
		<title>jsPlumb demo - jQuery</title>
		<meta http-equiv="X-UA-Compatible" content="IE=7">
		<link rel="stylesheet" href="/mp.css"></link>
		<link rel="stylesheet" href="../css/jsPlumbDemo.css"></link>
		<link rel="stylesheet" href="../css/selectDemo.css"></link>		
	</head>
	<body onunload="jsPlumb.unload();">
		<div class="menu"><a href="../doc/usage.html" class="mplink">view documentation</a>&nbsp;|&nbsp;<a href="mailto:simon.porritt@gmail.com" class="mplink">contact me</a>&nbsp;|&nbsp;<a href="http://code.google.com/p/jsplumb/" class="mplink">jsPlumb on Google code</a></div>
	
		<div class="window" id="window1">ONE</div>
		<div class="window" id="window2">TWO</div>
	    <div class="window" id="window3">THREE</div>
	    <div class="window" id="window4">FOUR</div>
	    <div class="window" id="window5">FIVE</div>
	    <div class="window" id="window6">SIX</div>
	    
	    <div id="debug"></div>
	    
	    <div id="explanation">
	    	<p>this is a demonstration of the experimental connection mouse events support to be introduced in 1.2.6.  each Connection changes appearance when the mouse hovers over it, and pops up an alert on click.  you can
	    	also drag connections around.
	    	 </p>
	    	<p>This demonstration uses jsPlumb 1.2.6-RC1, jQuery 1.4.4 and jQuery UI 1.8.2.</p>
	    	<br/><br/>
	    	You also might like to check out <a class="mplink" href="http://tweetplumb.com?q=#jquery" target="_blank">TweetPlumb</a>, a Twitter visualisation built with jsPlumb.
	    	<br/><br/>
	    </div>
	    
	    <script type="text/javascript" src="http://explorercanvas.googlecode.com/svn/trunk/excanvas.js"></script>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/jquery-ui.min.js"></script>
		
		<script type="text/javascript" src="../../js/lib/jsBezier-0.2-min.js"></script>
		<script type="text/javascript" src="../../js/1.2.6/jsPlumb-1.2.6-RC1.js"></script>
		<script type="text/javascript" src="../../js/1.2.6/jsPlumb-defaults-1.2.6-RC1.js"></script>
		<script type="text/javascript" src="../../js/1.2.6/jquery.jsPlumb-1.2.6-RC1.js"></script>
		<!--script type="text/javascript" src="../../js/1.2.6/jquery.jsPlumb-1.2.6-all-min.js"></script-->		
					            		
		<script type="text/javascript">
			$(document).ready(function() {				

				// chrome fix.
				document.onselectstart = function () { return false; };
				
				jsPlumb.Defaults.DragOptions = { cursor: 'pointer', zIndex:2000 };
				jsPlumb.setMouseEventsEnabled(true);
				//jsPlumb.setConnectionsAreDraggable(true); ??????????? should this be configurable, or just follow the setMouseEventsEnabled method?
				
				var imageEventListener = function(sourceId, targetId) { 
					return function(e) { alert("you clicked the image on the connection from " + sourceId + " to " + targetId); };
				};
				
				var paintStyle = {lineWidth:15,strokeStyle:'rgb(200,200,200)'};
				var hoverPaintStyle = {lineWidth:15,strokeStyle:'#EE5500'};
				
				var commonData = {
					paintStyle:paintStyle,
				   	backgroundPaintStyle:{lineWidth:17,strokeStyle:'rgba(100,100,100,50)'},
				   	hoverPaintStyle:hoverPaintStyle,											// new in 1.2.6: a paint style when the mouse is hovering.
				   	endpointStyle:{fillStyle:"rgb(200,200,200)"}
				};
				
				var arrowSpec = {width:40,height:40,location:0.7, foldback:0, paintStyle:{lineWidth:1, strokeStyle:"#000000"}};
				
				var connection1 = jsPlumb.connect({
					source:'window1', 
				   	target:'window2', 
				   	anchors:["BottomCenter", [ 0.75,0,0,-1 ]], 
				   	overlays : [ new jsPlumb.Overlays.Image({src:"../img/littledot.png", events:{"click":imageEventListener("window1", "window2")}}),
								new jsPlumb.Overlays.Label({label:"CONNECTION 1", location:0.3}),
								new jsPlumb.Overlays.Arrow(arrowSpec) ]
				 }, commonData);

				var connection2 = jsPlumb.connect({
					source:'window4', 
				   	target:'window6', 
				   	anchors:["RightMiddle", "LeftMiddle"], 				   	
				   	overlays : [ new jsPlumb.Overlays.Image({src:"../img/littledot.png", events:{"click":imageEventListener("window4", "window6")}}),
								new jsPlumb.Overlays.Label({label:"CONNECTION 2", location:0.3}),
								new jsPlumb.Overlays.Arrow(arrowSpec)]
				 }, commonData);

				var connection3 = jsPlumb.connect({
					source:'window4', 
				   	target:'window3', 
				   	anchors:["LeftMiddle", "RightMiddle"], 
				   	overlays : [ new jsPlumb.Overlays.Image({src:"../img/littledot.png", events:{"click":imageEventListener("window4", "window3")}}),
								new jsPlumb.Overlays.Label({label:"CONNECTION 3", location:0.3}),
								new jsPlumb.Overlays.Arrow(arrowSpec) ]
				 }, commonData);		

				var connection4 = jsPlumb.connect({
					source:'window5', 
				   	target:'window6',
				   	connector:"Bezier", 
				   	anchors:["TopRight", "BottomLeft"], 
				   	overlays : [ new jsPlumb.Overlays.Image({src:"../img/littledot.png", events:{"click":imageEventListener("window5", "window6")}}),
								new jsPlumb.Overlays.Label({label:"CONNECTION 4", location:0.3}),
								new jsPlumb.Overlays.Arrow(arrowSpec) ]
				 }, commonData);		 
			  						
		        // all the mouse listener stuff
		        var c = function(connection) {
					connection.bind("mouseenter", function(c) {
						// two ways to do this: use the setPaintStyle method, or use 'hoverPaintStyle' in the connection options.
						// connection.setPaintStyle(hoverPaintStyle);						
						$(c.source).addClass("hl");
						$(c.target).addClass("hl");
					});					
					connection.bind("mouseexit", function(c) {							
						// two ways to do this: use the setPaintStyle method, or use 'hoverPaintStyle' in the connection options.
						// connection.setPaintStyle(paintStyle);							
						$(c.source).removeClass("hl");
						$(c.target).removeClass("hl");
					});
					connection.bind("click", function(c) {
						alert("click on connection from " + c.sourceId + " to " + c.targetId);
					});					
				};
		        c(connection1);
		        c(connection2);
		        c(connection3);			      		        		        
		        c(connection4);
		});
		</script>
	    
	    	    
	    <!-- Start of StatCounter Code -->
<script type="text/javascript">
var sc_project=5700644; 
var sc_invisible=1; 
var sc_partition=71; 
var sc_click_stat=1; 
var sc_security="1cb90164"; 
</script>

<script type="text/javascript"
src="http://www.statcounter.com/counter/counter.js"></script><noscript><div
class="statcounter"><a title="counter for wordpress"
href="http://www.statcounter.com/wordpress.org/"
target="_blank"><img class="statcounter"
src="http://c.statcounter.com/5700644/0/1cb90164/1/"
alt="counter for wordpress" ></a></div></noscript>
<!-- End of StatCounter Code -->
	</body>
</html>